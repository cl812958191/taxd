<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>四方智汇</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,
          shrink-to-fit=no">
    <link rel="stylesheet" href="/static/css/bootstrap.css" th:href="@{/static/css/bootstrap.css}" type="text/css"/>
    <link rel="stylesheet" href="/static/css/woniunote.css" th:href="@{/static/css/woniunote.css}" type="text/css"/>
    <link href="/static/icon/font/css/open-iconic-bootstrap.css" th:href="@{/static/icon/font/css/open-iconic-bootstrap.css}" rel="stylesheet">
    <script type="text/javascript" src="/static/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.js"></script>
    <script type="text/javascript" src="/static/js/bootbox.js"></script>
    <script type="text/javascript" src="/static/js/SFZH.js"></script>
    <!-- bootstrap 5.x or 4.x is supported. You can also use the bootstrap css 3.3.x versions -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" crossorigin="anonymous">

    <!-- default icons used in the plugin are from Bootstrap 5.x icon library (which can be enabled by loading CSS below) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.min.css" crossorigin="anonymous">

    <!-- alternatively you can use the font awesome icon library if using with `fas` theme (or Bootstrap 4.x) by uncommenting below. -->
    <!-- link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" crossorigin="anonymous" -->

    <!-- the fileinput plugin styling CSS file -->
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />

    <!-- if using RTL (Right-To-Left) orientation, load the RTL CSS file after fileinput.css by uncommenting below -->
    <!-- link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/css/fileinput-rtl.min.css" media="all" rel="stylesheet" type="text/css" /-->

    <!-- the jQuery Library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>

    <!-- piexif.min.js is needed for auto orienting image files OR when restoring exif data in resized images and when you
        wish to resize images before upload. This must be loaded before fileinput.min.js -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/js/plugins/piexif.min.js" type="text/javascript"></script>

    <!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview.
        This must be loaded before fileinput.min.js -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/js/plugins/sortable.min.js" type="text/javascript"></script>

    <!-- bootstrap.bundle.min.js below is needed if you wish to zoom and preview file content in a detail modal
        dialog. bootstrap 5.x or 4.x is supported. You can also use the bootstrap js 3.3.x versions. -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <!-- the main fileinput plugin script JS file -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/js/fileinput.min.js"></script>

    <!-- following theme script is needed to use the Font Awesome 5.x theme (`fas`). Uncomment if needed. -->
    <!-- script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/themes/fas/theme.min.js"></script -->

    <!-- optionally if you need translation for your language then include the locale file as mentioned below (replace LANG.js with your language locale) -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-fileinput@5.2.5/js/locales/zh.js"></script>

</head>
<body>
<!-- 首页顶部Logo和Slogan区域 -->
<div class="navbar-default header">
    <div class="container" style="padding: 0px 10px 0px 0px;">
        <div class="row">
            <div class="col-sm-4 col-4" style="margin: 10px 0px;">
                <a href="/">
                    <img src="../static/img/logo_sf.png" style="width: 230px;">
                </a>
            </div>
            <!-- 仅在sm及以上设备中显示 -->
            <div class="col-sm-8 col-8 d-none d-sm-block"
                 style="text-align: right; padding-top: 20px;">
                <h2 style="color: midnightblue">国家高新技术申请认证企业</h2>
            </div>
            <!-- 仅在移动端显示 -->
            <div class="col-sm-8 col-8 d-sm-none"
                 style="text-align: right; padding-top: 20px;">
                <h3 style="color: midnightblue">国家高新</h3>
            </div>
        </div>
    </div>
</div>

<!-- 设置一个最外层DIV，保持100%的宽度拉通，设置导航栏 -->
<div class="menu">
    <div class="container" style="padding: 0px;">
        <!-- 基于BootStrap定制导航栏，可以参数bootcss.com中文网站的教程 -->
        <nav class="navbar navbar-expand-lg navbar-dark menu-bar">
            <a class="navbar-brand" href="#">快捷导航</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <!-- 配置折叠按钮，在移动端点击即可显示导航菜单，所有类和ID属性请勿修改 -->
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- 配置导航菜单项列表 -->
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-item nav-link" href="/" onclick="checkLog()">自动辅助账生成</a>
<!--                    <a class="nav-item nav-link" href="/type/2-1">专利立项</a>-->
                    <a class="nav-item nav-link" href="/post-2-j">自动专利文档生成</a>
                    <a class="nav-item nav-link" href="/downloadPage">文档下载</a>
                </div>
                <!-- ml-auto类属性设置菜单项靠右对齐 -->
                <div class="navbar-nav ml-auto">

<!--                    {% if session.get('islogin') == 'true'  %}-->
<!--                    <a class="nav-item nav-link" href="#">欢迎您：{{ session.get('nickname')}}</a>-->
                    &nbsp;&nbsp;&nbsp;
<!--                    <a class="nav-item nav-link" href="/logout">注销</a>-->
<!--                    <a class="nav-item nav-link" href="#">用户中心</a>-->
<!--                    {% else %}-->
                    <a class="nav-item nav-link" href="#" data-toggle="modal" data-target="#mymodal" >登录/注册</a>
<!--                    {% endif %}-->
                </div>
            </div>
        </nav>
    </div>
</div>

<!-- 中部区域布局 -->

<div class="container" style="margin-top: 20px;">
    <div class="row">
<!--        <div class="col-12">文章标题-->
<!--            <input type="text" class="form-control">-->
<!--        </div>-->
<!--        <div class="col-12">-->
<!--            <script id="content" type="text/plain"></script>-->
<!--        </div>-->
            <form method="POST" role="form" action = "/patentTow" enctype="multipart/form-data">
             <label for="input-6a">专利资料上传</label>
             <div class="file-loading">
                 <input id="input-b6a" name="input-b6a[]" type="file" multiple >
             </div>
            </form>
            <script>
            $(document).ready(function() {
                $("#input-b6a").fileinput({
                    language: 'zh',
                    allowedFileExtensions: ['xls','doc','docx','xlsx','pdf'],
                    uploadUrl:  "/patentTow",
                    overwriteInitial: false,
                    showUpload: false, //是否显示上传按钮
                    uploadAsync: false,
                    initialPreviewAsData: true, // identify if you are sending pre
                    uploadExtraData:function (previewId, index) {
                        //向后台传递id作为额外参数，是后台可以根据id修改对应的图片地址。
                        var companyName = $.trim($("#companyName").val());
                        var patentName = $.trim($("#patentName").val());
                        return {'companyName':companyName, 'patentName': patentName, 'fileType':'1' };
                    }
                })

                $("#input-b6a").on('filebatchuploadsuccess', function(event,data,previewId,index) {
                    var response = data.response;
                    //alert(response.errmsg)
                    bootbox.alert({title:"信息提示",message:response.msg});
                    //setTimeout('location.reload();',1000);
                    if (response.msg == '批量上传成功'){
                        setTimeout('location.reload();',1500);
                    }

                })


            });
            </script>
    </div>
    <div class="col-4">
<!--            <button type="button" class="btn btn-primary" >专利自动生成</button>-->
            <button id="generateBtn" class="btn btn-primary" data-toggle="modal" data-target="#myModal1">专利自动生成</button>
<!--            <script>$('#generateBtn').prop('disabled', true);</script>-->
            <!-- 模态框（Modal） -->
            <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h5 class="modal-title" id="myModal1Label">请填写基本信息</h5>
                        </div>
                        <div class="modal-body">

                            <form class="form-horizontal" role="form">
                              <div class="form-group">
                                <label class="col-sm-2 control-label">公司名称</label>
                                <div class="col-sm-10">
                                  <input class="form-control" id="companyName" type="text">
                                </div>
                              </div>
                                <div class="form-group">
                                <label class="col-sm-2 control-label">专利名称</label>
                                <div class="col-sm-10">
                                  <input class="form-control" id="patentName" type="text">
                                </div>
                              </div>
                              <fieldset disabled>
                                <div class="form-group">
                                  <label for="disabledTextInput" class="col-sm-2 control-label">生成类型</label>
                                  <div class="col-sm-10">
                                    <input type="text" id="disabledTextInput" class="form-control" placeholder="专利文本">
                                  </div>
                                </div>
                              </fieldset>
                            </form>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                            <button type="button" class="btn btn-primary" onclick="submit()">提交</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>
    </div>
</div>

<!-- 底部设计 -->
<div class="container-fluid footer">
    <div class="container">
        <div class="row">
            <div class="col-4 left">
                	<p>版权所有 &copy; 四方智汇 (V-1.0)</p>
                	<p>备案号： </p>
            </div>
            <div class="col-4 center">

            </div>
            <div class="col-4 right">
                	<p>联系我们</p>
            </div>
        </div>
    </div>
</div>

<!-- 登录和注册模态框 -->
<!-- data-backdrop="static" 表示用户必须要手工关闭模态框才能操作其他页面 -->
<div class="modal fade" id="mymodal" data-backdrop="static" tabindex="-1"
     role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
    <!-- 在模态框内部配置Tab选项卡，用于切换登录和注册窗口 -->
    <div class="tabbable" id="tabs"
         style="background-color: #337AB7; height: 50px;padding: 5px 20px;">
        <button type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
        </button>
        <!-- 与登录和注册窗口的ID进行关联 -->
        <ul class="nav nav-tabs" role="tablist">
            <li id="login" class="nav-item active">
                <a href="#loginpanel" data-toggle="tab" class="nav-link" style="color: midnightblue">登录</a>
            </li>
            <li id="reg" class="nav-item">
                <a href="#regpanel" data-toggle="tab" class="nav-link" style="color: midnightblue">注册</a>
            </li>
        </ul>
    </div>

    <!-- 绘制登录窗口 -->
    <div class="tab-content">
    <div class="tab-pane container active" id="loginpanel">
    <div class="modal-content" style="margin: 20px 0px;">
    <div class="modal-body">
        <div class="form-group row" style="margin-top: 20px;">
            <label for="loginname" class="col-4">&nbsp;&nbsp;登录邮箱：</label>
            <input type="text" id="loginname" class="form-control col-7" placeholder="请输入你的邮箱地址"/>
        </div>
        <div class="form-group row">
            <label for="loginpass" class="col-4">&nbsp;&nbsp;登录密码：</label>
            <input type="password" id="loginpass" class="form-control col-7" placeholder="请输入你的登录密码"/>
        </div>
        <div class="form-group row">
            <label for="logincode" class="col-4"> &nbsp;&nbsp;图片验证码：</label>
            <input type="text" id="logincode" class="form-control col-5" placeholder="请输入右侧的验证码"/>
            <img src="/vcode" id="loginvcode" class="col-3" style="cursor:pointer;" onclick="this.src= '/vcode?' + Math.random()"/>
        </div>
    </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-dark" data-dismiss="modal">关闭</button>
            <button type="button" class="btn btn-primary" onclick="doLogin()">登录</button>
        </div>
    </div>
    </div>

    <!-- 绘制注册窗口 -->
    <div class="tab-pane container" id="regpanel">
    <div class="modal-content">
    <div class="modal-content" style="margin: 20px 0px;">
    <div class="modal-body">
        <div class="form-group row" style="margin-top: 20px;">
            <label for="regname" class="col-4">&nbsp;&nbsp;注册邮箱：</label>
            <input type="text" id="regname" class="form-control col-7" placeholder="请输入你的邮箱地址"/>
        </div>
        <div class="form-group row">
            <label for="regpass" class="col-4">&nbsp;&nbsp;注册密码：</label>
            <input type="password" id="regpass" class="form-control col-7" placeholder="请输入你的注册密码"/>
        </div>
        <div class="form-group row">
            <label for="regcode" class="col-4">&nbsp;&nbsp;邮箱验证码：</label>
            <input type="text" id="regcode" class="form-control col-4" placeholder="请输入邮箱验证码"/>
            <button type="button" class="btn btn-primary col-3" onclick="doSendMail(this)">发送邮件</button>
        </div>
    </div>
    <div class="modal-footer">
        <span>注册时请使用邮箱地址，便于找回密码。&nbsp;&nbsp;</span>
        <button type="button" class="btn btn-dark" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary" onclick="doReg()">注册</button>
    </div>
    </div>
    </div>
    </div>
    </div>
</div>
</div>
</div>

</body>
</html>